/******************************************************************
 * This is the main file for the Software Sessions
 *
 */

#include <stdint.h>
#include <inttypes.h>
#include <math.h>

#include "common.h"

// Uncomment for Session SW1
// extern void warmup();

// Uncomment for Session SW2 onwards
//#include "mp_arith.h"
//#include "montgomery.h"
//#include "asm_func.h"


int main()
{
    init_platform();
    init_performance_counters(1);

    // Hello World template
    //----------------------
    xil_printf("Begin\n\r");
    uint32_t a[32]         = { 0xeec344b9, 0xd4d6cec7, 0xd500142b, 0x0e39396c, 0x59b860b2, 0x00969ff7, 0x80cc3e80, 0xfe01f342, 0x4467302b, 0x2b600e0a, 0xff20ed80, 0x418b3706, 0x9b1ecb19, 0x0891035d, 0x5fd17222, 0xcd9aff7d, 0xfe0ee3a4, 0x6af7242d, 0x62b400b6, 0x8f2b7502, 0xf6a6db01, 0x40ad32f3, 0xd1aa6b09, 0x0fb07f39, 0x57e6d90a, 0xa4aa03f3, 0xd0e54fa1, 0xcd860d2b, 0x9e8858ba, 0x80068c3c, 0x6bf42477, 0xbd3a9b3a };
    uint32_t b[32]         = { 0xa62faf5c, 0x140feec3, 0x4bdb0362, 0x52aeb48a, 0xf3b81e0e, 0x803edb3a, 0xcb794d45, 0xa43ec4af, 0x44f59c66, 0x9b336570, 0x3ffe9699, 0x79697ae6, 0xa3617b28, 0xe78aaaf7, 0x6bc5ef9a, 0x55345a7a, 0xfa3a4717, 0x2fce2848, 0x3987df36, 0x90349f1d, 0xf7bcdf69, 0xbe0a271c, 0x4a252e3c, 0x06422b26, 0x067bda4f, 0x227c0d59, 0x61f7f527, 0xe829086d, 0xb061e97d, 0x1a91e85c, 0xc5bbbb7e, 0x89d1ee71 };
    uint32_t n[32]         = { 0xbdb9d31d, 0x97f9eb19, 0xde4ffb4c, 0x7b516124, 0x93f15132, 0x875760a5, 0xd77fa594, 0x1d757c5c, 0x13a972b6, 0xc1efb791, 0x5cbca5e6, 0x0a8ba323, 0x76fb0a71, 0xc3831463, 0xfff0275d, 0x338f5e88, 0xfdbf5baa, 0x46872c9f, 0x44c628bd, 0x2c000aa8, 0x630d7e76, 0x25826da7, 0x69d5e532, 0xdd3f3235, 0xafc9fb7a, 0x00a0088f, 0x706b5aea, 0xe91cf0c7, 0x3eece72e, 0x35c0ad41, 0x9110dca7, 0xcd700cae };
    uint32_t n_prime[32]   = { 0x8e7078cb, 0x8e38e575, 0xabe41e7c, 0x243b53dc, 0x7ba110b4, 0x9e15e893, 0xa2d8f231, 0xcd240370, 0xd3182784, 0xbdc0b197, 0xafbfa418, 0xa0a61c32, 0xe51ca38d, 0x08955abd, 0xca82214b, 0x4e9432f8, 0xb4ef8d39, 0x4171e8b9, 0xd3bfbae6, 0x82ea9e0c, 0x451d6826, 0xd3ad19e3, 0xdf93a442, 0xb9c7e570, 0x1988925e, 0xc36557df, 0x215e8bda, 0x790330c8, 0xe403e5eb, 0x0b2e71cb, 0x618b2959, 0xfa346ed6 };

    uint32_t res[33] = {0};

START_TIMING;

    xil_printf("Hello World!\n\r");
    montMul(a,b,n,n_prime,res,32);
    int length = sizeof(res) / sizeof(res[0]);
    customprint(res, length);

STOP_TIMING;

	xil_printf("End\n\r");

    // SW1: warmup exercise
    //----------------------
    // warmup();

    cleanup_platform();

    return 0;
}
