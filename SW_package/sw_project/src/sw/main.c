/******************************************************************
 * This is the main file for the Software Sessions
 *
 */

#include <stdint.h>
#include <inttypes.h>
#include <math.h>

#include "common.h"

// Uncomment for Session SW1
// extern void warmup();

// Uncomment for Session SW2 onwards
//#include "mp_arith.h"
//#include "montgomery.h"
//#include "asm_func.h"


int main()
{
    init_platform();
    init_performance_counters(1);

    // Hello World template
    //----------------------
    xil_printf("Begin\n\r");
    uint32_t a[32]         = { 0x45f95219, 0x5b58e0e3, 0xf47bd6cf, 0x31699ef0, 0x7bbc14bc, 0x2df55eb9, 0xa1e9bbbd, 0x7af3dc46, 0x73cbdb3e, 0xca3d7ef7, 0x4d932ad4, 0xc46cdfaa, 0x048d953b, 0x5c0d9f71, 0xb1d36f3d, 0xf6059832, 0x82906373, 0xbdf7901f, 0x23473806, 0x95304bf0, 0x76fd8596, 0xe69ec036, 0x55e969bc, 0xec3ab45c, 0x46f2229e, 0xf900bc2b, 0x7db6bc46, 0xbaaf749c, 0x1f008a8d, 0xabeb58b6, 0xd2787ab4, 0x868bde47 };
    uint32_t b[32]         = { 0xe49531cc, 0xaaf93f9b, 0xabb71fad, 0x2775c5d1, 0xea34e79c, 0xa4837433, 0x2abc34bb, 0x2ac026d6, 0x53ef5e1a, 0xc01b22da, 0xb1d9b931, 0x77c4437d, 0x2d40fefd, 0xa0e50d19, 0x5c257631, 0x8cee73f3, 0xb8507f1d, 0x7467cbd1, 0x49e0633c, 0xa3019709, 0x5d20342a, 0x83930c41, 0x820425d1, 0x439c0857, 0x35e455cf, 0xf35ed093, 0xc85c1b4f, 0x123e8933, 0x822b05be, 0xc37e8cd5, 0x1e6e899a, 0x85ed8baa };
    uint32_t n[32]         = { 0xbdcaa551, 0xa3fed5ec, 0x04c12020, 0x4ae9cacf, 0xecc4cb36, 0x0f6012d9, 0xee441baf, 0x403f7482, 0x3a3e80c9, 0x153ce2ae, 0x670db890, 0x007d88b9, 0x3a2db29d, 0x3a66adae, 0x795aeae9, 0xe81f9807, 0x4efaba62, 0xe8fd5167, 0x926449a2, 0xc0fa706f, 0x847f327f, 0xca94afa0, 0xedc7fdde, 0xf92e6e1d, 0x84e27d53, 0xf46b6ead, 0x6fd34a5d, 0xee69fe59, 0x032249f2, 0x0d066a2e, 0xd598e046, 0x8871ad3a };
    uint32_t n_prime[32]   = { 0xe6383c4f, 0xcf9d462b, 0x4db5b13f, 0x3f288d81, 0x819a959a, 0xb6b4f355, 0xa339e7b3, 0x2b8774a1, 0xb3b19a70, 0x0004cc70, 0x13c04c91, 0xd20e5ea1, 0x8f1656f3, 0xf72fa0fe, 0xb05010e9, 0xe6301867, 0xc5495620, 0x425166cc, 0xbb162f5c, 0x07617c87, 0xbed16030, 0xcb048940, 0x9b2ebe7b, 0x6131f085, 0xea4b8a22, 0x88a79301, 0x04d52116, 0xafbc792b, 0x332bc297, 0x47e15878, 0xd355da0d, 0xce9ef138 };

    uint32_t res[33] = {0};

START_TIMING;

    xil_printf("Hello World!\n\r");
    montMul(a,b,n,n_prime,res,32);
    int length = sizeof(res) / sizeof(res[0]);
    customprint(res, length);

STOP_TIMING;

	xil_printf("End\n\r");

    // SW1: warmup exercise
    //----------------------
    // warmup();

    cleanup_platform();

    return 0;
}
